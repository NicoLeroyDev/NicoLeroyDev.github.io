---
import "../styles/global.css";
import { languages } from '../i18n/ui';
import { useTranslatedPath } from '../i18n/utils';

const { currentLang } = Astro.props;
const translatePath = useTranslatedPath(currentLang);
---

<ul class="language-picker fixed top-4 right-4 flex">
    {Object.entries(languages).map(([lang, label]) => (
        <li>
            <a
                href={translatePath('/', lang)}
                class={`flex relative p-4 uppercase text-xs dark:text-light transition-colors duration-200 ease-in-out ${
                    currentLang === lang
                        ? 'active'
                        : ''
                }`}
            >
                {lang}
            </a>
        </li>
    ))}
</ul>

<style>
    @reference "../styles/tailwind-config.css";

    .active {
        @apply font-bold;
    }

    li {
        &:not(:last-of-type) {
            a {
                &::before {
                    @apply content-[""] absolute h-[10px] w-[1px] bg-dark dark:bg-light right-0 top-1/2 -translate-y-1/2 transition-colors duration-200 ease-in-out;
                }
            }
        }
    }

    a {

        &:hover,
        &:focus {

            &::after {
                @apply opacity-100;
            }
        }

        &::after {
            @apply content-[""] absolute h-[1px] w-1/3 left-1/2 bottom-[15px] bg-dark dark:bg-light -translate-x-1/2 opacity-0 transition-all duration-200 ease-in-out;
        }
    }
</style>